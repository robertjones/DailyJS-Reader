"use strict";angular.module("djsreaderApp",["ngCookies","ngResource","ngSanitize","ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("djsreaderApp").controller("MainCtrl",["$scope","$http","$timeout","$filter",function(a,b,c,d){function e(b){for(var c=0;c<a.stories.length;c++)if(a.stories[c].id===b.id)return!0;return!1}function f(b){var c=!1;angular.forEach(b,function(b){e(b)||(a.stories.push(b),c=!0)}),c&&(a.stories=d("orderBy")(a.stories,"-updated"))}a.refreshInterval=60,a.stories=[],a.feeds=[{url:"http://dailyjs.com/atom.xml",items:[]}],a.addFeed=function(b){if(b.$valid){var c=angular.copy(b);a.feeds.push(c),a.fetchFeed(c),a.newFeed.url=""}},a.fetchFeed=function(a){a.items=[];var c="http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20xml%20where%20url%3D'";c+=encodeURIComponent(a.url),c+="'%20and%20itemPath%3D'feed.entry'&format=json&diagnostics=true&callback=JSON_CALLBACK",b.jsonp(c).success(function(b){b.query.results&&(a.items=b.query.results.entry),f(a.items)}).error(function(a){console.error("Error fetching feed:",a)})},a.deleteFeed=function(b){a.feeds.spice(a.feeds.indexOf(b),1)}}]);